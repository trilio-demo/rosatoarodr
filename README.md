# minecraft

Notes:

1. Secret that holds the AWS S3 credentials you have to provide...
2. Certain files that you can customize are in the "files" directory
3. Certain variables you also might need to customize are in the vars.yaml file:
   ns: demo-minecraft # namespace to create on the source cluster
   kubeconfig: /home/st/trilio/kubeconfigs/rosakubeconfig.yaml # kubeconfig file for the source cluster
   #kubeconfig: /home/st/trilio/kubeconfigs/arokubeconfig.yaml # kubeconfig file for destination cluster
   command1: "oc adm policy add-scc-to-user anyuid -z default -n {{ ns }}" # Allow permissions for pods on clusters. 
4. restoresite.yaml will create empty ns in destination, configure target and restore
   restorearo.yaml will do the same except restore, so then we can restore in the UI

Ansible + TVK to do a Minecraft Server Disaster Recovery from one K8s cluster to another, with a Persistent Volume

Backup creation Section:

First we run backupsite.yaml to create a NS in the source Openshift clusteri. It also prepares backup target, and backup plan.

Then we run the script that will spin up a Minecraft server in that namespace using a Helm Chart. This is the run.sh script in the Minecraft folder, which will take the values.yaml file for the helm chart.

Then we can play for a while, and then take a backup with the playbook createbackup.yaml

Restore Section:

After that, we will run restoresite.yaml so we create a restore NS and target in the destination k8s cluster. At the end of this, a restore will run. So in the destination cluster, there is only one Ansible Playbook to be run, to have our app up and running.

If it's a k8s public cloud, we will have to grab the load balancer IP generated by the public cloud, to be used in the minecraft client.

If we don't want to use Ansible, we can also restore from the Trilio UI, accesing the backup target browsing functionality of the Trilio UI

